<launch>
     <let name="map_path" 
          value="$(find-pkg-share prestobot_navigation)/maps/map.yaml" />
     <let name="navigation_config_path"
          value="$(find-pkg-share prestobot_navigation)/config/prestobot_navigation.yaml" />
     <let name="rviz_config_path"
          value="$(find-pkg-share prestobot_navigation)/rviz/navigation_config.rviz" />
     
     <include file="$(find-pkg-share prestobot_simulation)/launch/gazebo.launch.xml" />

     <include file="$(find-pkg-share nav2_bringup)/launch/bringup_launch.py">
          <arg name="map" value="$(var map_path)" />
          <arg name="params_file" value="$(var navigation_config_path)" />
          <arg name="use_sim_time" value="true" />
     </include>

     <node pkg="rviz2" exec="rviz2" output="screen" 
          args="-d $(var rviz_config_path)" />

     <node pkg="topic_tools" exec="relay" name="cmd_vel_relay" output="screen">
          <param name="input_topic" value="/cmd_vel" />
          <param name="output_topic" value="/diff_drive_controller/cmd_vel" />
     </node>

     <node pkg="prestobot_py_pkg" exec="set_initial_pose" />
</launch>